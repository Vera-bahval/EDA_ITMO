# Анализ данных о мошеннических транзакциях

## Описание проекта

Разведочный анализ данных (EDA) 7.48M реальных финансовых транзакций за октябрь 2024 для выявления паттернов мошенничества и разработки продуктовых и технических гипотез.

**Ключевые характеристики датасета:**
- 7,483,766 транзакций за период 30.09.2024 - 30.10.2024
- Fraud rate: 19.97% (1,494,719 мошеннических операций)
- 11 валют, 12 стран, 8 категорий вендоров
- Реал-тайм признаки активности за последний час

---

## Методология решения задачи

### Подход к анализу данных
Для решения задачи применялся системный подход:

1. **Поэтапное исследование данных**
   - Начали с базовой статистики и структуры данных
   - Проверили качество данных и отсутствующие значения
   - Изучили распределение целевой переменной (fraud rate: 19.97%)

2. **Итеративный анализ паттернов**
   - Временные паттерны: анализ по часам, дням недели
   - Географические закономерности: страны, операции вне дома
   - Категориальный анализ: устройства, каналы, типы вендоров
   - Численный анализ: суммы транзакций с конвертацией в USD

3. **Выявление аномалий и критических находок**
   - POS-терминалы с 100% fraud rate (требует проверки данных)
   - Микротранзакции <$10 с 99.5% fraud rate
   - Ночные операции с 59% fraud rate vs 10% днем

### Инструменты и технологии

**Основной стек:**
- `pandas`
- `numpy`
- `matplotlib/seaborn`
- `jupyter notebooks`

### Процесс принятия решений

**1. Валидация находок на данных**
- Каждый инсайт проверялся на статистическую значимость
- Использовались группировки и агрегации для подтверждения паттернов
- Проводилось сравнение fraud rate между сегментами

**2. Бизнес-ориентированный подход**
- Находки переводились в конкретные продуктовые гипотезы
- Оценивался потенциальный impact каждого решения

**3. Критический подход**
- Выявление аномалий в данных (100% fraud для POS)
- Формулирование вопросов к качеству данных

### Особенности работы с данными

**Challenges и их решения:**
- **Большой объем данных** (7.48M записей) → использование sample для демонстрации сложных вычислений
- **Вложенная структура** `last_hour_activity` → применение `pd.json_normalize()`
- **Множество валют** → конвертация в USD через исторические курсы
- **Высокий fraud rate** (19.97%) → фокус на наиболее критичные паттерны

---

## Ключевые находки

### Критические аномалии в данных
1. **POS-терминалы показывают 100% fraud rate** - требует проверки качества данных
2. **Микротранзакции (<$10) имеют 99.5% fraud rate** - возможные тестовые атаки
3. **Высокие суммы (>$5000) показывают 100% fraud rate** - подозрительная закономерность

### Четкие паттерны мошенничества
- **Временной паттерн**: Ночные часы (1-4) дают 59% fraud vs 10% днем (5.6x разница)
- **География**: Некоторые страны показывают 37% fraud vs 7% в развитых (5.2x разница)  
- **Локация**: Операции вне домашней страны дают 57% vs 2.5% дома (22.8x разница)
- **Комбинированный риск**: Ночь + вне дома + >$1000 = **96% fraud rate**

---

## Продуктовые гипотезы

### Гипотеза #1: Система динамических лимитов
**Проблема**: Текущие лимиты не учитывают контекст транзакции

**Решение**: Внедрить контекстно-зависимые лимиты:
- Ночные часы (1-4): снизить лимиты на определенны процент
- Операции вне домашней страны: снизить лимит без доп. верификации
- Рисковые страны: снизить лимит для новых клиентов

**Ожидаемый эффект**: Снижение fraud losses

### Гипотеза #2: Real-time система скоринга
**Проблема**: Улучшение real-time оценки риска

**Решение**: ML-модель с факторами:
- Время транзакции
- География + домашняя страна
- Сумма в USD
- Канал и устройство

**Ожидаемый эффект**: Детекция большего количества fraud-транзакций в реальном времени

### Гипотеза #3: Умные блокировки микроплатежей
**Проблема**: 99.5% микротранзакций - мошенничество

**Решение**: 
- Блокировать все транзакции <$10 у клиентов <30 дней
- Лимит 3 микротранзакции в день для остальных
- Whitelist для известных микроплатежных сервисов

**Ожидаемый эффект**: Блокировка большего числа fraud-транзакций/месяц

---

## Технические гипотезы

### Гипотеза #4: Feature engineering для временных паттернов
**Идея**: Создать advanced временные признаки

**Признаки**:
- `is_suspicious_hour` (1-4 AM = True)
- `hours_since_last_transaction`
- `transaction_velocity_1h` (количество за час)
- `unusual_timing_score` (отклонение от паттерна клиента)

**Ожидание**: Улучшение precision модели 

### Гипотеза #5: Геолокационная модель риска
**Идея**: Создать risk score для комбинаций стран/городов

**Подход**:
- Кластеризация стран по fraud rate
- Модель расстояния от домашней страны
- Risk score для city_size + country комбинаций

**Ожидание**: Выявление новых геолокационных паттернов

### Гипотеза #6: Graph-based анализ устройств
**Проблема**: Мошенники используют одни device fingerprints

**Решение**:
- Граф связей device_fingerprint ↔ customer_id
- Детекция аномальных паттернов в графе
- Blacklist подозрительных fingerprints

**Ожидание**: Обнаружение организованного мошенничества

---

## Критические вопросы к данным
1. **POS-терминалы с 100% fraud** - ошибка разметки или реальная проблема?
2. **Микротранзакции с 99.5% fraud** - это тестовые атаки или ошибки в данных?
3. **Отсутствие seasonality** - почему fraud rate стабилен по дням?

### Гипотезы о качестве данных:
- Возможная проблема с labeling для физических транзакций
- Микротранзакции могут быть automated attacks
- Некоторые "fraud" могут быть legitimate disputed transactions